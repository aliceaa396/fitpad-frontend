{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ala31\\\\Projects\\\\capstone\\\\capstone-frontend\\\\src\\\\Components\\\\LoginRegister\\\\Login.js\";\nimport React, { Component } from 'react';\nimport TokenService from '../../services/token-service';\nimport AuthApiService from '../../services/auth-api-service';\nimport { Button, Input } from '../Utils/Utils';\nimport Context from '../../Contexts/Context';\nimport '../../Styles/Login.css';\nexport default class Login extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      error: null\n    };\n\n    this.handleSubmitJwtAuth = event => {\n      event.preventDefault();\n      const {\n        user_email,\n        password\n      } = event.target;\n      this.setState({\n        error: null\n      });\n      AuthApiService.postLogin({\n        user_email: user_email.value,\n        password: password.value\n      }).then(res => {\n        user_email.value = '';\n        password.value = '';\n        TokenService.saveAuthToken(res.authToken);\n        this.context.setAuth(res.authToken);\n        this.props.onLoginSuccess();\n      }).catch(res => {\n        this.setState({\n          error: res.error\n        });\n      });\n    };\n  }\n\n  render() {\n    const {\n      error\n    } = this.state;\n    return React.createElement(\"div\", {\n      className: \"inner-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"header\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      className: \"home-titles\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50\n      },\n      __self: this\n    }, \" Login \")), React.createElement(\"div\", {\n      className: \"box\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      role: \"alert\",\n      className: \"LogForm__alert\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54\n      },\n      __self: this\n    }, error && React.createElement(\"p\", {\n      \"aria-label\": \"You have entered an incorrect username or password\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56\n      },\n      __self: this\n    }, error)), React.createElement(\"form\", {\n      className: \"loginForm\",\n      onSubmit: this.handleSubmitJwtAuth,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61\n      },\n      __self: this\n    }, React.createElement(Input, {\n      className: \"landing-form-text\",\n      required: true,\n      type: \"email\",\n      id: \"user_email\",\n      placeholder: \"Your Email\",\n      name: \"user_email\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62\n      },\n      __self: this\n    }), React.createElement(Input, {\n      className: \"landing-form-text\",\n      required: true,\n      type: \"password\",\n      id: \"password\",\n      name: \"password\",\n      placeholder: \"Password\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64\n      },\n      __self: this\n    }), React.createElement(Button, {\n      className: \"form-btns\",\n      type: \"submit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    }, \"  Login \"))));\n  }\n\n}\nLogin.defaultProps = {\n  location: {},\n  history: {\n    push: () => {}\n  }\n};\nLogin.contextType = Context;","map":{"version":3,"sources":["C:/Users/ala31/Projects/capstone/capstone-frontend/src/Components/LoginRegister/Login.js"],"names":["React","Component","TokenService","AuthApiService","Button","Input","Context","Login","state","error","handleSubmitJwtAuth","event","preventDefault","user_email","password","target","setState","postLogin","value","then","res","saveAuthToken","authToken","context","setAuth","props","onLoginSuccess","catch","render","defaultProps","location","history","push","contextType"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport TokenService from '../../services/token-service';\r\nimport AuthApiService from '../../services/auth-api-service';\r\nimport { Button, Input } from '../Utils/Utils'\r\nimport Context from '../../Contexts/Context'\r\nimport '../../Styles/Login.css';\r\n\r\nexport default class Login extends Component {\r\n  static defaultProps = {\r\n    location: {},\r\n    history: {\r\n      push: () => {},\r\n    },\r\n  };\r\n\r\n  static contextType = Context;\r\n\r\n  state= { error: null }\r\n\r\n\r\n  \r\n\r\n  handleSubmitJwtAuth = event => {\r\n    event.preventDefault();\r\n    const { user_email, password} = event.target\r\n\r\n    this.setState({ error:null });\r\n\r\n    AuthApiService.postLogin({\r\n      user_email: user_email.value,\r\n      password: password.value,\r\n    })\r\n    .then(res => {\r\n      user_email.value=''\r\n      password.value=''\r\n      TokenService.saveAuthToken(res.authToken)\r\n      this.context.setAuth(res.authToken)\r\n      this.props.onLoginSuccess()\r\n    })\r\n    .catch(res => {\r\n      this.setState({ error: res.error })\r\n    })\r\n  }\r\n  render() {\r\n    const { error } = this.state;\r\n\r\n    return (\r\n        <div className=\"inner-container\"> \r\n          <div className=\"header\">\r\n            <h2 className=\"home-titles\"> Login </h2>\r\n          </div> \r\n          \r\n          <div className=\"box\">\r\n          <div role=\"alert\" className=\"LogForm__alert\">\r\n            {error && (\r\n              <p aria-label=\"You have entered an incorrect username or password\">\r\n                {error}\r\n              </p>\r\n            )}\r\n        </div>\r\n            <form className= \"loginForm\" onSubmit={this.handleSubmitJwtAuth}>\r\n              <Input className=\"landing-form-text\" required type=\"email\" id=\"user_email\" placeholder=\"Your Email\" name=\"user_email\"/>\r\n\r\n              <Input className=\"landing-form-text\" required type=\"password\" id=\"password\" name=\"password\" placeholder=\"Password\"/>\r\n\r\n              <Button className=\"form-btns\" type='submit'>  Login </Button>\r\n            </form>\r\n          </div>\r\n        </div>\r\n    )\r\n  }\r\n}\r\n\r\n"]},"metadata":{},"sourceType":"module"}